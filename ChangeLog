1999-06-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/dos.cc: Include <cstring>.

	* include/vx68k/human.h (class file_system): New class.
	(class dos): Add member fs.

	* include/vx68k/memory.h: Reformat indents.
	(_VX68K_MEMORY_H): Renamed from VX68K_MEMORY_H.
	(class x68k_address_space): Change members' order.

	* lib/vx68k/memory.cc (getl): New function.

	* lib/vm68k/addrspace.cc (getl): Add cast to uint32_type before
	shift.

1999-06-25  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/dos.cc (dos_create, dos_open): Treat any space in file
	name as the end of string.

	* lib/vx68k/Makefile.am (libvx68k_a_SOURCES): Add process.cc.

	* lib/vx68k/process.cc: New file.

	* lib/vx68k/dos.cc (dos_close): Use process::close.
	(dos_create): Use process::create.
	(dos_open): Use process:open.

	* include/Makefile.am (noinst_HEADERS): Remove all.

	* debug.h: Removed.

	* lib/vx68k/doscontext.cc: Expand "debug.h".

	* lib/vx68k/dos.cc (execute): Make process p and pass it to the
	dos_exec_context.

	* lib/vx68k/doscontext.cc (dos_exec_context): Add (process *)
	argument and initialize _process with the value.
	(dos_exec_context): Change the order of the first two arguments.

	* include/vx68k/human.h (class dos_exec_context): Add member
	_process and current_process().

1999-06-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* include/vm68k/memory.h (class address_space): Move find_page for
	possibly better optimization.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (bclrl_i): Fix log message.
	(s_b): New function.
	(install_instructions): Add new handlers.

	* include/vm68k/condition.h (struct t, struct f): New classes.

	* lib/vm68k/statusreg.cc (set_cc): Removed as an out-of-line
	function.

	* include/vm68k/cpu.h (class status_register): Add static member
	common_cc_eval.
	(class status_register): Make set_cc inline.

	* lib/vm68k/execunit.cc (dispatch): Removed as an out-of-line
	function.

	* include/vm68k/cpu.h (class exec_unit): Make dispatch inline.

	* lib/vx68k/memory.cc (read, getb, getw, write, putb, putw): Use
	generate_bus_error.
	(getb): Changed to read words from the array directly.
	(putb): Changed to read-modify-write words to the array directly.

	* include/vm68k/memory.h (class memory_page): Changed to a class
	with access specs.

	* lib/vm68k/memory.cc (generate_bus_error): New function.

	* include/vm68k/memory.h (struct memory_page): Remove throw-specs
	from methods.  Also change all classes derived from this class.

1999-06-22  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* include/vm68k/addressing.h (class indexed_indirect): Fix
	address.
	(class indexed_pc_indirect): Fix address.
	(class disp_pc, class indexed_pc_indirect): Add offset to
	effective address.

	* include/vx68k/human.h (class file, class process): New classes.

	* NEWS: Modified.

	* lib/vx68k/dos.cc (dos_getpdb, dos_intvcs): New functions.
	(dos): Add new handlers.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (dispatch): Add the third argumrnt to
	handlers.
	(set_instruction): Save handler with instruction data.
	(exec_unit): Likewise.
	(divuw, orib, subw, swapw): New functions.
	(install_instructions): Add new handlers.

	* include/vm68k/cpu.h (struct install_data): New class.
	(class exec_unit): Add instruction_data * to instruction_handler's
	argument.  Also change all handler functions.
	(class exec_unit): Change data members to keep instruction_data
	pointers.

	* lib/vx68k/dos.cc (dos_malloc): New function.
	(dos): Add new handlers.

	* lib/vm68k/execunit.cc (install_instructions): Add new addressing
	mode to lea.

	* include/vm68k/addressing.h (class indexed_pc_indirect): New
	class.
	(class indexed_indirect): Modify code of address.
	(class disp_pc): Fix textw.

	* bin/main.cc: Use "getopt.h" instead of <getopt.h>.

	* Makefile.am (bin_PROGRAMS): Removed.
	(SUBDIRS): Add bin to the list.

	* configure.in: Add AC_PROG_CC and remove AC_PROG_CPP.
	Add bin/Makefile to output files.

	* bin/main.cc: Moved from ../main.cc.

	* bin/Makefile.am: New file.
	* bin/getopt.c, bin/getopt1.c, bin/getopt.h: New file.

1999-06-21  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (bclrl_i, btstl_i, cmpaw, muluw, negl):
	New functions.
	(install_instructions): Add new handlers.

	* configure.in: Use AC_SEARCH_LIBS for a pthread library.
	Reformat lines.

	* lib/vm68k/addrspace.cc (getl): Use find_page.
	(putw): Use putw_aligned.
	(putl): Use memory_page::putl in the case that address does not
	cross page boundaries.

	* include/vm68k/memory.h (class address_space): Add
	canonical_address and putw_aligned.
	(class address_space): Make putb inline.

	* include/vm68k/cpu.h (class context): Use getw_aligned in fetchw.

	* lib/vm68k/addrspace.cc (getb): Move to the header as inline.
	(getw): Use getw_aligned.
	(getl): Use memory_page::getl in the case that address does not
	cross page boundaries.

	* include/vm68k/memory.h: Add comments.
	(class address_space): Add canonical_address and getw_aligned.
	(class address_space): Make getb inline.

	* lib/vm68k/addrspace.cc: Expand "debug.h".

1999-06-20  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (bmi): #if'd out.
	(install_instructions): Add new handlers.

	* include/vm68k/condition.h (struct pl, struct mi): New classes.

	* lib/vx68k/dos.cc (dos_putchar): Avoid stdio.

	* NEWS: Modified.

	* lib/vm68k/statusreg.cc (struct cmp_cc_evaluator): Add lt and le.
	(struct asr_cc_evaluator): Remove use of eq in ls.
	(struct lsl_cc_evaluator): Likewise.

	* lib/vm68k/execunit.cc (set_instruction) [L]: Add warning
	message.
	(addw_r, andiw, andil, mulsw, subal, subil): New functions.
	(asrl_r): Use set_cc_asr.
	(cmpiw): Fix the size of an immediate value.
	(eoriw): Use extsw for an immediate value.
	(subb): Fix to use textb for logging.
	(install_instructions): Add new handlers.
	(install_instructions): Fix wrong mask bits.

	* lib/vx68k/dos.cc (dos_write): Use dos_exec_context::write.
	(dos_create): Change file name to "create.out".

	* lib/vx68k/doscontext.cc (read): Fix memory leak.
	(write): New function.  Also change the class definition.

	* lib/vx68k/dos.cc (dos_filedate, dos_putchar): New functions.
	(dos): Add new handlers.

	* lib/vm68k/execunit.cc (eorb_r, eorw_r): New functions.
	(install_instructions): Add new handlers.

	* lib/vx68k/dos.cc (dos_delete): New function.
	(dos_write): Change the return value.
	(dos): Add new handlers.

	* lib/vm68k/execunit.cc (lslb_i): New function.
	(lslw_i): Renamed from lslw_i_d.  Also change all user.
	(lsll_i): Renamed from lsll_i_d.  Also change all user.
	(lslw_i, lsll_i): Use set_cc_lsl.
	(install_instructions): Add new handlers.

	* lib/vm68k/statusreg.cc (struct lsl_cc_evaluator): New class.
	(set_cc_lsl): New function.  Also change the class definition.

	* lib/vm68k/execunit.cc (dbf): Renamed from dbf_d.
	(dbf): Fix counter size to word.
	(tstw): Fix debugging log message.

	* lib/vm68k/context.cc (run): Add register dump.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (addw, andl, asll_r, asrl_r, extl, lsll_r,
	lsrl_r, tstw): New functions.
	(addw_off_d, andl_i_d, tstw_d): #if'd out.
	(install_instructions): Add new handlers.

1999-06-19  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (lsrw, lsrw): Apply masks before shifts.
	(subb, subl, subl_r, subib, subqw, subql_d): Use set_cc_sub to
	update the condition code.
	(orl, lsrw_r): New function.
	(install_instructions): Add new handlers.

	* lib/vm68k/statusreg.cc (set_cc_sub): New function.  Also add to
	the class definition.

	* lib/vm68k/execunit.cc (cmpiw): New function.
	(install_instructions): Add new handlers.

	* include/vm68k/addressing.h (class disp_indirect): Change member
	reg to unsigned.
	(class disp_indirect): Fix textw to use offset.
	(class indexed_indirect): New class.

	* lib/vm68k/statusreg.cc (struct asr_cc_evaluator): Change the
	side of shift.

	* lib/vm68k/execunit.cc (subl_r, subqw): New functions.
	(install_instructions): Add new handlers.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (bge): #if'd out.
	(lslw_r, subb, addb, rolb_r): New functions.
	(install_instructions): Add new handlers.

	* lib/vm68k/statusreg.cc (struct common_cc_evaluator): Add member
	function le.

	* include/vm68k/condition.h (struct ge, struct lt, struct gt,
	struct le): New classes.

	* include/vm68k/cpu.h (struct cc_evaluator): Add member function
	le.
	(class status_register): Add member function gt and le.

	* lib/vx68k/dos.cc: Expand "debug.h".
	(dos_create, dos_write): New function.
	(dos): Add new handlers.

	* lib/vm68k/execunit.cc (install_instructions): Add new pea
	handler.

	* include/vm68k/addressing.h (class absolute_short): New class.
	(class absolute_long): Make data member private.
	(class absolute_long): Change constructor's 1st argument unsigned.

	* lib/vx68k/dos.cc (dos_chmod): New function.
	(dos): Add new handler.

	* lib/vm68k/execunit.cc (cmpb, cmpw, cmpl, cmpib): Change code to
	set condition codes properly.
	(install_instructions): Fix subib code.
	(cmpal): New function.
	(moveb, movew): Reformat code.
	(moveb_d_postinc, moveb_postinc_postinc, movew_d_predec,
	movew_absl_predec): #if'd out.
	(install_instructions): Add new handlers.

	* lib/vm68k/statusreg.cc: Add suffix _eval to evaluator objects.
	(struct common_cc_evaluator): Renamed from result_cc_evaluator.
	Also change all users.
	(struct cmp_cc_evaluator): New class.
	(set_cc_cmp): New function.  Also change the class definition.

1999-06-18  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (dist-snapshot distcheck-snapshot): Change version
	number for snapshots.

	* NEWS: Modified.

	* configure.in: Set VERSION to 0.34.

	* lib/vm68k/execunit.cc (bcc): #if'd out
	(install_instructions): Add new handlers.

	* include/vm68k/condition.h (struct hi, struct ls): New classes.

	* include/vm68k/addressing.h (class data_register): Fix getb wrong
	size bug.

	* lib/vm68k/execunit.cc (install_instructions): Change the type of
	argument to reference.  Also change all users.
	(eoriw): New function.
	(lsrw_i, lsrl_i): Change code to hold values in signed type.
	(install_instructions): Add new handlers.

	* lib/vm68k/context.cc (context): Change the type of second
	argument to const pointer.

	* include/vm68k/cpu.h (class context): Change type of eu const
	pointer.

	* include/vm68k/condition.h: Change interface to pass context by
	reference instead of pointer.  Also change all users.

	* include/vm68k/addressing.h: Change interface to pass context by
	reference instead of pointer.  Also change all users.

	* include/vm68k/types.h: Remove size test for uint_type.

	* include/vm68k/cpu.h: Remove typedef execution_context.  Also
	change all users.
	(class exec_unit): Rename insn_handler to instruction_handler and
	change the second argument to reference.  Also change all users.

	* lib/vm68k/execunit.cc (lsrw_i): Renamed from lsrw_i_d.  Also
	change all users.
	(lsrw_i, lsrl_i): Change code to set condition codes properly.

	* lib/vm68k/statusreg.cc (struct result_cc_evaluator, struct
	asr_cc_evaluator): New classes.
	(cs, eq, mi, lt): Moved into the header as inline functions using
	cc_eval.
	(set_cc): Change code to use new members.
	(set_cc_asr): New function.
	(status_register): Initialize new members.

	* include/vm68k/cpu.h (struct cc_evaluator): New class.
	(class status_register): Modify members.

1999-06-15  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (movew_d_postinc, movel_d_postinc,
	movel_d_predec, movel_a_predec, movel_postinc_a, movel_i_predec,
	movel_d_absl, movel_a_absl, pea_absl, tstb_d, tstb_predec,
	tstl_d): Removed.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (orw, b): New functions.
	(install_instructions): Add new handlers.

	* include/vm68k/Makefile.am (noinst_HEADERS): Add condition.h.

	* include/vm68k/condition.h: New file.

	* include/vm68k/types.h: Add new types: uint_type, uint32_type,
	sint_type, and sint32_type.

	* configure.in: Move config.h into include.

1999-06-04  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (cmpw, subib): New function template.
	(movew): Use L instead of VL.
	(movew_d_postinc): #if-out the function.
	(install_instructions): Add new functions.

	* lib/vx68k/dos.cc (dos_ioctrl): New function.
	(dos): Add new function.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (bmi): New function.
	(install_instructions): Add new function.

	* include/vm68k/cpu.h (class status_register): Add new members.

	* lib/vm68k/statusreg.cc (mi): New function.

	* lib/vx68k/dos.cc (dos_setblock): New function.
	(dos): Add new function.

	* include/vm68k/addressing.h (class disp_pc): New class.

	* lib/vm68k/execunit.cc: Expand "debug.h".
	(cmpb, jsr, moveml_mr, pea): New function template.
	(cmpl): Rename Destination to Source.
	(lea): Rename Source to Destination.
	(moveml_mr<postinc_indirect>): Renamed from moveml_postinc_r.
	(cmpl, lea, moveml_mr<postinc_indirect>): Use L instead of VL.
	(lea): Change the arg to isize to 0.
	(pea_absl): #if-out the function.
	(install_instructions): Add new functions.

1999-05-22  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/context.cc: Rename execution_context to context.
	(step): Changed to inline.  Update the header.

	* include/vm68k/cpu.h (class execution_context): Updated.
	(class context): Renamed from execution_context.  Add typedef for
	the old name.

	* lib/vm68k/context.cc: Expand "debug.h".
	(step): New function.
	(run): Use step.

	* Makefile.am (EXTRA_DIST): Add MEMO.ja.

	* MEMO.ja: New file.

	* NEWS: Modified.

1999-05-21  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/memory.cc (getw, putw): Replace abort with throw.

	* lib/vm68k/addrspace.cc (read, getb, getw, write, putb, putw):
	Mask address using ADDRESS_BIT.

	* include/vm68k/memory.h: Rename MEMORY_SHIFT to ADDRESS_BIT.
	Also update all referrers.

	* lib/vm68k/execunit.cc (movel): Modify the log message.
	(addl): New function template.
	(install_instructions): Add new functions.

	* Makefile.am (dist-snapshot): Change the version number format.

	* NEWS: Modified.

	* configure.in: Remove PRCS-keyword substitution.
	Set VERSION to 0.33.

	* Makefile.am (EXTRA_DIST): Add VERSION-ID.

	* VERSION-ID: New file.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (movel_d_absl, movel_a_absl): Fix data
	sizes for put.
	(clrl, moveal, tstb, tstl): New function templates.
	Ifdef out substituted functions.
	(install_instructions): Add new functions.

	* include/vm68k/addressing.h (class postinc_indirect): Renamed
	from postincrement_indirect.
	(class predec_indirect): Renamed from predecrement_indirect.
	(postincrement_indirect, predecrement_indirect): Added typedefs.

1999-04-04  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* include/vm68k/cpu.h (class status_register): Add members ls and
	hi, and reformat.

	* lib/vm68k/execunit.cc (movew_off_d, movel_off_d): #if'd out.
	(install_instructions): Use disp_indirect.
	(clrb): New function.
	(clrw): Modify log message and fix %pc increment.
	(install_instructions): Add new functions.
	(addal, clrb, clrw, cmpl, lea, moveb, movew, movel, subl): Print
	%pc to log output.
	(clrw_predec, lea_offset_a, lea_absl_a, moveb_indir_d,
	moveb_postinc_d, moveb_off_d, movew_off_d, movew_absl_d,
	movel_d_d, movel_a_d, movel_postinc_d, movel_off_d): Removed.
	(addil, addqb, addqw, addqw<address_register>, addql,
	addql<address_register>, cmpib): Fix %pc increments.
	(cmpib): Modify log message.
	(cmpib_postinc): Removed.

	* include/vm68k/addressing.h (class disp_indirect): New class.

	* lib/vm68k/execunit.cc (moveb, addal): New function.
	(movew): Remove unneccessary extsw.
	(movel): Remove unneccessary extsl.
	(movel_d_d, movel_a_d, movel_postinc_d, movew_absl_d): #if'd out.
	(install_instructions): Updated with new functions.

	* NEWS: Modfied.

	* include/vm68k/addressing.h (class postincrement_indirect):
	Handle %a7 specially.
	(class predecrement_indirect): Likewise.

	* lib/vm68k/execunit.cc (cmpl, lea, lsrl_i, subl, movew, movel):
	New functions.
	(lea_absl_a): #if'd out
	(cmpib): Change the log output.
	(install_instructions): Updated with the new functions.

	* include/vm68k/addressing.h (class data_register): Add members:
	isize, textb, textw, and textl.
	(class address_register): Likewise.
	(class indirect): Change data members private from protected.
	(class indirect): Add members: isize, address, textb, textw, and
	textl.  Use address in get and put methods.
	(class postincrement_indirect): Made non-derived.
	(class postincrement_indirect): Add members: reg, isize, getb,
	getw, getl, putb, putw, putl, textb, textw, and textl.
	(class predecrement_indirect): Made non-derived.
	(class predecrement_indirect): Add members: reg, isize, textb,
	textw, and textl.
	(class absolute_long): New class.
	(class immediate): New class.

1999-04-01  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* README: Modified.

	* include/vm68k/cpu.h (class exec_unit): Change the first arg of
	insn_handler.  Also update all functions.

	* TODO: Modified.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (addqw<address_register>): Fix size.
	(addql, addql<address_register>, clrw, cmpib): New template
	functions.
	(clrw<address_register>): Specialized without definition.
	(addql_d, clrw_predec, cmpib_postinc): #if'd out.
	(install_instructions): Updated with the new functions.

	* lib/vm68k/statusreg.cc (status_register): New constructor.
	(supervisor_state): Removed.

	* include/vm68k/cpu.h (class status_register): Add constructor and
	member value.
	(class status_register): Make supervisor_state inline.

	* lib/vm68k/execunit.cc (struct data_register, struct
	address_register, struct indirect): Removed.
	(addil, addqb): Updated for <vm68k/addressing.h> classes.
	(addil<address_register>): Specialized without definition.
	(addqw, addqw<address_register>): New template function.
	(addqw_a): #if'd out.
	(install_instructions): Updated with the new functions.

	* include/vm68k/Makefile.am (noinst_HEADERS): Add addressing.h.

	* include/vm68k/addressing.h: New file.

1999-03-30  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (struct data_register, struct
	address_register, struct indirect): New structs.
	(addil, addqb): New template functions.
	(movew_d_postinc): Fix source register reference.
	(addil_d, addqb_d): #if'd out.
	(install_instructions): Use the template version.
	[0] (addil_d): Fix value size.

1999-03-26  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/doscontext.cc (read): Use unsigned char instead of
	uint8.
	(start): Remove the restart label.

	* lib/vx68k/dos.cc (dos_print): Use write for unbuffered output.

	* TODO: Modified.

	* include/vx68k/human.h (class dos_exec_context): Add member exit.

	* lib/vx68k/dos.cc: Remove methods of class dos_exec_context.
	(dos_exit2): Use dos_exec_context::exit instead of throw.

	* lib/vx68k/Makefile.am (libvx68k_a_SOURCES): Add doscontext.cc.

	* lib/vx68k/doscontext.cc: New file.
	(exit): New function.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (cmpib_postinc, moveb_postinc_d,
	movel_postinc_d, subb_postinc_d, subql_d): New functions.
	(install_instructions): Set instruction handlers to the new
	functions.
	(movew_d_predec): Fix register reference bug.

	* lib/vx68k/dos.cc (fgetc): Fix the subscript.

	* include/vm68k/cpu.h (extsb, extsw, extsl): Avoid overflows.

1999-03-25  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Modified.

	* NEWS: Modified.

	* lib/vm68k/execunit.cc (moveb_off_d, moveb_d_postinc, lsll_i_d,
	moveb_indir_d, movel_d_postinc, lslw_i_d): New functions.
	(install_instructions): Set instructions.
	(lsrw_i_d): Renamed from lslw_i_d, and reverse the shift diection.
	Update all users.

	* include/vx68k/human.h (class dos_exec_context): Add member
	fgetc.

	* lib/vx68k/dos.cc (fgetc, dos_fgetc): New functions.
	(dos): Set instructions.

	* lib/vm68k/execunit.cc (bcc, dbf_d, addqb_d, addql_d, andl_i_d,
	movew_d_postinc, tstb_d, tstb_predec): New functions.
	(install_instructions): Set instructions.

	* lib/vm68k/statusreg.cc (cs): New function.
	* include/vm68k/cpu.h (class status_register): Add members cc and
	cs.

	* lib/vm68k/execunit.cc (addil_d, movel_a_d): Remove fc.
	(lslw_i_d, movel_d_d, tstl_d): New functions.
	(install_instructions): Set instructions.

	* lib/vx68k/dos.cc (seek, dos_seek): New function.
	(dos): Add instruction.
	* include/vx68k/human.h (class dos_exec_context): Add member seek.

1999-03-24  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (addq_off_d, addil_d, movew_off_d,
	movel_a_d, movel_off_d, movel_d_predec, movel_d_absl,
	movel_a_absl): New functions.
	(movew_absl_d): Fix to modify only the low word of register.
	(install_instructions): Set new instructions.

	* include/vx68k/human.h (dos): Add member mem, remove main_ec.
	* lib/vx68k/dos.cc (execute): Use local dos_exec_context.
	(dos): Modify member initialization.
	(load_executable): Set address registers.

	* lib/vx68k/dos.cc (dos_exec_context): Reverse the order of
	arguments.
	(dos_exec_context): Made out-of-line.

	* lib/vm68k/context.cc (execution_context): Reverse the order of
	arguments.  Also update all users.

	* lib/vm68k/context.cc: Renamed from cpu.cc.
	* lib/vm68k/Makefile.am (libvm68k_a_SOURCES): Update the file
	name.

	* configure.in: Add check for -lpthread.

	* include/vx68k/human.h (class dos): Remove members
	load_executable and start.

	* lib/vx68k/dos.cc (load_executable, start): Moved from class dos.
	(execute): Use methods of main_ec.

	* include/vx68k/human.h (class dos_exec_context): Add member
	functions: load_executable, start, and execute.
	(class dos_exec_context): Remove member execute.

1999-03-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/dos.cc (dos): Fix main_ec initialization.
	(load_executable, start): Use fprintf for messages.
	Remove `#include <iostream>'.

	* include/vx68k/human.h (class dos): Remove members: from, open,
	close, read, and write.
	(class dos_exec_context): Remove `friend class dos';
	(class dos_exec_context): Remove member dos.  Also update the
	constructor.
	Remove forward declaration for class dos.

	* lib/vx68k/dos.cc (read, close, open): Moved from class dos to
	class dos_exec_context.
	(dos_close, dos_open, dos_read): Use static_cast instead of
	dos::from.

	* include/vx68k/human.h (class dos_exec_context): Changed from
	struct.
	(class dos_exec_context): Add member functions: open, close, read,
	and write.

	* include/vm68k/cpu.h (class cpu): Removed.  Also remove member
	functions.

	* lib/vm68k/cpu.cc (run): Use ec->run.

	* lib/vx68k/dos.cc (start): Use main_ec.run.
	(dos): Use set_instruction instead of set_handlers.

	* include/vx68k/human.h (struct dos_exec_unit): Add argument to
	constructor.
	(class dos): Change main_cpu to of type vm68k::exec_unit.

	* include/vm68k/cpu.h (class execution_context): Add member eu.
	* lib/vm68k/cpu.cc: Use <> for <vx68k/cpu.h>.
	Include "debug.h" instead of <cassert>.  Update all users.
	(run): New function.
	(execution_context): Initialize eu with the new argument.  Update
	all callers.

	* lib/vm68k/execunit.cc (dispatch): New function.
	(execute): Removed.
	* include/vm68k/cpu.h (class exec_unit): Updated.

1999-03-22  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/cpu.cc: Remove `#include <algorithm>'.
	(run): Use fprintf instead of iostream functions.

	* TODO: Modified.

	* NEWS: Modified.

	* lib/vx68k/dos.cc (read, dos_read): New functions.
	(dos): Set an instruction.
	* include/vx68k/human.h (class dos): Add member functions read and
	write.

	* lib/vm68k/execunit.cc (movew_absl_predec, movel_i_predec): New
	functions.
	(install_instructions): Set instructions.
	(clrw_predec, moveb_postinc_postinc, movew_d_predec,
	movel_a_predec, movel_postinc_a): Keep addresses in auto
	variables.
	(movel_a_predec): Use extsl for value.
	(moveql_d): Use extsb for value.

	* include/vm68k/cpu.h (extsl): New inline function.
	(extsb, extsw): Divide M by 2.

1999-03-20  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Modified.

	* lib/vx68k/dos.cc (load_executable): Remove size adjustment for
	write.

	* lib/vm68k/addrspace.cc: Include "debug.h".
	(read, write): Rewrite using memory_page::read and
	memory_page::write.
	(set_pages): Use nana-style assertion check.

	* lib/vx68k/memory.cc: Add `using namespace vx68k' and move
	functions out of the namespace.
	(read, write): Write real code.
	(x68k_address_space): Map only available pages.

	* include/vm68k/memory.h (class address_space): Remove _signed
	member function, and add gets and puts.

	* TODO: Modified.

	* lib/vx68k/dos.cc (dos_open): Fix offset.
	(open): Add log message.

	* include/vm68k/memory.h (struct memory_page): Modify read and
	write to return size_t, and remove throw-specs for them.  Update
	all derived classes.

	* main.cc (main): Add human:: as required.

	* include/vx68k/human.h (class dos): Add member functions: open
	and close, from.
	(namespace vm68k): Remove `using namespace human'.

	* lib/vx68k/dos.cc (close, open): New functions.
	(dos_close, dos_exit2, dos_open, dos_print): Renamed from close,
	exit2, open, and print, respectively.  Update all referrers.
	(dos_close, dos_open): Use the new open and close.

	* include/vm68k/except.h: Include <exception> and add `using
	namespace std'.
	(struct exception): Removed.

	* include/vx68k/human.h (struct dos_exec_context): New struct.
	(class dos): Change type of member main_ec.
	* lib/vx68k/dos.cc (dos): Update member initialization.

	* include/vx68k/memory.h (class x68k_address_space): Renamed from
	address_space.  Update all referrers.

1999-03-19  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/dos.cc: Include <fcntl.h> and <unistd.h> if available.
	(close, open): Add test code.

	* configure.in: Add checks for <fcntl.h> and <unistd.h>.
	Check also for CPP.

	* lib/vm68k/execunit.cc (pea_absl): Fix address register.

	* lib/vx68k/dos.cc (quit_loop): New struct.
	(start): Handle quit_loop exception.
	(exit2): New function.
	(dos): Set instruction to the new function.

	* lib/vm68k/execunit.cc (moveml_postinc_r): New function.
	(install_instructions): Set instructions to the new function.
	(moveml_r_predec, moveml_postinc_r): Move array subscripts out of
	loops.

	* include/debug.h: Include <cstdio>.

	* lib/vm68k/execunit.cc: Use I and VL instead of assert and
	fprintf.

	* README: Modified.

	* include/debug.h (debug_printf): Removed.
	(VL): Change to empty.

	* lib/vm68k/execunit.cc (moveml_r_predec): Divide a loop to two
	register groups.

	* include/vm68k/cpu.h (registers): Use array for general
	registers.  Update all users.

	* include/debug.h (debug_printf): Fix errors.
	(I): Remove `std::'.

	* configure.in: Add `--with-nana'.
	Remove `--enable-step-trace'.

	* acconfig.h: Modify comments.

	* TODO: Modified.

1999-03-18  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vx68k/dos.cc: Use I and VL instead of assert and fprintf.
	Remove cpp tests for TRACE_STEPS.

	* configure.in: Add checks for Nana.

	* include/debug.h: New file.
	* include/Makefile.am: Add comments.
	(noinst_HEADERS): Add the new file.

	* lib/vm68k/execunit.cc (unlk_a): New function.
	(install_instructions): Set operation words to the new function.

	* lib/vx68k/dos.cc (close): New function.
	(dos): Set operation word to the new function.

	* lib/vm68k/execunit.cc (movew_absl_d, tstw_d, beq,
	movew_d_predec): New functions.
	(install_instructions): Set operation words to the new functions.

	* lib/vm68k/execunit.cc (moveb_postinc_postinc): Renamed from
	moveb_postint_postinc.  Update all referrers.
	(moveb_postinc_postinc, movel_a_predec): Update the condition
	codes.
	(movew_d_absl): Fix the trace output.
	Modify comments.

	* lib/vx68k/dos.cc (open, print): Output system call names.
	(load_executable): Set part of PSP.

	* lib/vm68k/execunit.cc (clrw_predec, movew_d_absl, moveql_d): Use
	status_register::set_cc.

	* lib/vm68k/statusreg.cc (set_cc): New function.
	(eq, lt): Use result.

	* include/vm68k/cpu.h (class status_register): Changed from struct.

	* lib/vm68k/execunit.cc (execute, bge, bne, bra, bsr,
	lea_offset_a, lea_absl_a, link_a, movew_d_absl, moveml_r_predec,
	pea_absl): Use execution_context::fetchw.

	* include/vm68k/cpu.h (class execution_context): Add fetchw and
	fetchl.

	* lib/vm68k/execunit.cc (execute, bge, bne, bra, bsr, clrw_predec,
	lea_offset_a, lea_absl_a, link_a, moveb_postinc_postinc,
	movew_a_absl, movel_a_predec, movel_postinc_a, moveml_r_predec,
	pea_absl, rts): Use execution_context::program_fc/data_fc.

	* include/vm68k/cpu.h (class execution_context): Changed from
	struct.
	(class execution_context): Add program_fc and data_fc().

	* lib/vm68k/addrspace.cc: Modify comments.
	(getb_signed, getw_signed, getl_signed): Removed.

	* lib/vm68k/execunit.cc (bge, bne, lea_offset_a, link): Use
	extsw/extsb instead of getw_/getb_signed.
	(link_a): Renamed from link.  Update all referrers.

	* lib/vm68k/addrspace.cc: New file.
	* lib/vm68k/Makefile.am (libvm68k_a_SOURCES): Add the new file.
	* lib/vm68k/memory.cc: Move address_space methods to
	addrspace.cc.

	* lib/vm68k/memory.cc (read, write, getb, putb, getw, putw, getl,
	putl): Remove throw-specs.
	(getb, putb, getw, putw): Change the value types to unsigned int.
	* include/vm68k/memory.h (class address_space): Updated.

1999-03-16  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (bra, bsr): Use extsw and extsb to make
	displacements.
	(bra): Fix debug output.

	* lib/vm68k/statusreg.cc (lt): New function.

	* lib/vm68k/execunit.cc (bge): Do test condition code.

	* lib/vx68k/dos.cc (open): Make the d0 value unsigned.

	* lib/vm68k/statusreg.cc (eq): Invert the return value to debug.

	* include/vm68k/cpu.h (extsb, extsw): New functions.
	(status_register): Fix ne to invert its return value.
	(status_register): Add lt and ge.

	* lib/vm68k/execunit.cc (movew_d_absl, bge, bra, moveql_d): New
	functions.
	(install_instructions): Set the new instructions to the operation
	words.

	* lib/vx68k/dos.cc (open): New function.
	(dos): Set the new system call to the operation word.

1999-03-15  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/vm68k/execunit.cc (addqw_a, subql_a): Move the register
	number extraction earlier.

	* lib/vm68k/memory.cc (getb_signed, getw_signed, getl_signed):
	Cast non-negative values explicitly.
	(getb_signed, getw_signed, getl_signed): Remove throw-specs.
	Update the class-def too.

	* include/vm68k/cpu.h (registers): Renamed from cpu_regs.  Update
	all users.

	* lib/vm68k/execunit.cc (bne, bsr, lea_offset_a, link): Use
	address_space::getw_signed.

	* include/vm68k/memory.h (class address_space): Add signed get
	methods.
	* lib/vm68k/memory.cc (getb_signed, getw_signed, getl_signed): New
	functions.

	* TODO: Modifed.

	* README: Modified.

	* NEWS: Modified.

	* lib/vm68k/statusreg.cc: New file.
	* lib/vm68k/Makefile.am (libvm68k_a_SOURCES): Add the new file.

	* lib/vm68k/execunit.cc (bne, subql_a, clrw_predec, pea_absl): New
	functions.
	(install_instructions): Set the new instructions.

	* acconfig.h: Add _REENTRANT.
	* configure.in: Define _REENTRANT.

	* Move libvm68k to lib/vm68k and libvx68k to libvx68k.
	* lib/Makefile.am: New file.
	* Makefile.am (SUBDIRS): Replace libvm68k and libvx68k with lib.
	(vx68k_LDADD): Adjust the directories.
	* configure.in: Change the AC_OUTPUT files.  Change the AC_INIT
	test file.

	* include/vm68k/cpu.h: Modify comments.
	(status_register): New class.
	(user_cpu_regs): Removed.
	(cpu_regs): Reconstruct members.  Update all users.

1999-03-13  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc: Modify comments.

	* TODO: Modified.

	* README: Modified.

	* libvm68k/execunit.cc: Modify comments.
	(addqw_a, rts, movel_postinc_a, lea_offset_a,
	moveb_postinc_postinc): New function.
	(install_instructions): Set new instructions for operation words.
	(bsr): Fix the write address

	* libvm68k/execunit.cc: Print instructions only ifdef TRACE_STEPS.

	* acconfig.h: Add new macros.

	* configure.in: Define _GNU_SOURCE.
	Add `--enable-step-trace'.

	* main.cc: Modify comments.
	(_): New macro.
	(parse_options): New function.
	(main): Parse options via parse_options and handle options.
	(main): Handle unhandled exceptions.

	* README: Modified.

	* libvm68k/execunit.cc (bsr): Print absolute address.
	(lea_absl_a, link, mmove_l_a_predec, movem_l_r_predec): Use the
	MIT syntax to print instead of the Motorola syntax.
	(movel_a_predec): Renamed from move_l_a_predec.  Update all
	referrers.
	(moveml_r_predec): Renamed from movem_l_r_predec.  Update all
	referrers.

1999-03-12  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* libvx68k/dos.cc: Remove namespace blocks.
	(print): New function.
	(dos): Set &print.

	* libvx68k/memory.cc: Modify comments.
	(getb, putb): Replace abort with real code.

	* libvm68k/memory.cc (getb, putb): New function.

	* libvm68k/execunit.cc: Modify comments.
	(bsr): New function.
	(install_instructions): Set &bsr.

1999-03-11  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* libvm68k/Makefile.am: Add comments.

	* Makefile.am (vx68k_SOURCES): Renamed from x68v_SOURCES.
	(vx68k_LDADD): Likewise.

	* Rename the vx68k and vm68k directories to libvx68k and libvm68k
	respectively.  Update all refs.
	
	* configure.in: Change the AC_INIT test file.

	* main.cc: Moved from vx68v/main.cc.
	* Makefile.am (INCLUDES, bin_PROGRAMS, x68k_SOURCES,
	x68v_LDADD): Added.
	* vx68k/Makefile.am: Modify comments.
	(bin_PROGRAMS, vx68k_SOURCES, vx68k_LDADD): Removed.

	* vx68k/dos.cc: Modify comments.

	* vm68k/execunit.cc (link, move_l_a_predec, movem_l_r_predec):
	Store data to memory.

	* vx68k/dos.cc (start): Set a7 to a safe value.

	* vm68k/cpu.cc: Modify comments.

	* vm68k/execunit.cc (move_l_a_predec, lea_absl_a): New function.
	(install_instructions): Set &move_l_a_predec and &lea_absl_a.

	* vm68k/execunit.cc (link): New function.
	(movem_l_r_predec): Renamed from movem_r_postdec.  Update all
	refs.
	(movem_l_r_predec): Add decrements.
	(movem_l_r_predec): Move the PC increment.
	(movem_l_r_predec): Modify the stderr message.
	(install_instructions): Set &link.

	* include/vm68k/cpu.h (user_cpu_regs): Rename members.

	* vm68k/execunit.cc (movem_l_r_postdec): New function.
	(install_instructions): Set instruction.

	* include/vm68k/cpu.h: Make insn_instruction public.

	* vm68k/execunit.cc (exec_unit): Call install_instructions.

	* include/vm68v/cpu.h (class cpu): Replace the instruction table
	with an exec_unit.  Remove all references.
	* vm68k/cpu.cc: Remove namespace block.
	(run): Use exec_unit::execute.
	(set_handlers): Use exec_unit::set_instruction.

	* vm68k/execunit.cc: New file.
	* include/vm68k/cpu.h (class exec_unit): New class.
	* vm68k/Makefile.am (libvm68k_a_SOURCES): Add execunit.cc.

	* vx68k/dos.cc (load_executable): Make address fixup.

	* vm68k/memory.cc (getl, putl): New function.

	* Makefile.am (dist-snapshot): Add `x' to the version number.

1999-02-05  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* vx68k/main.cc (main): Add check for argc.

	* TODO: Updated.

	* NEWS: Updated.

1999-02-03  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (dist-snapshot): New target.

1998-11-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* vx68k/main.cc (main): Update dos::execute call.

	* vx68k/dos.cc (start): Add argument: argv.
	(execute): Likewise.
	* include/vx68k/human.h (class dos): Update.

1998-11-21  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* vx68k/dos.cc (load_executable): Fix reloc_size offset.

1998-11-20  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.27.

	* vx68k/Makefile.am (libvx68k_a_SOURCES): Remove loader.cc.
	* vx68k/loader.cc: Removed.

	* vx68k/dos.cc (load_executable): Get header information.

	* vm68k/memory.cc (write): Defined.
	(read): Defined.

	* vx68k/dos.cc (start): Catch an illegal_instruction.
	(load_executable): Try to load executable.

	* vm68k/cpu.cc (illegal_insn): Throw an illegal_instruction.

	* include/vm68k/except.h (struct illegal_instruction): New class.
	(struct zero_divide): New class.
	(struct privilege_violation): New class.

	* vm68k/memory.cc (getw): New function.
	(getl): New function.
	(putw): New function.
	(putl): New function.

	* Version 0.26.

	* include/vm68k/except.h (struct bus_error): Rename member fc to
	status.  All refs changed.
	(struct address_error): New class.

	* vm68k/memory.cc (READ): Removed.  All uses replaced with
	bus_error::READ.
	(WRITE): Removed.  All uses replaced with bus_error::WRITE.

	* include/vm68k/except.h (exception): Add WRITE and READ enum.

	* vm68k/memory.cc (address_space::set_pages): Renamed from
	set_memory_pages.  Change the first and the second arguments'
	types.  All refs changed too.

	* include/vm68k/Makefile.am (noinst_HEADERS): Add except.h.
	* include/vm68k/except.h: New file.
	(struct exception): Moved from types.h.
	(struct bus_error): Moved from memory.h.

	* vm68k/cpu.cc (set_pc): #if'd out.

	* include/vm68k/cpu.h (class cpu): Remove member function set_pc.

	* vm68k/memory.cc (address_space::putw): Defined.

	* vx68k/memory.cc (main_memory_page::getw): Fix test condition.
	(main_memory_page::putw): Store value into array.

	* vx68k/main.cc (main): Rewritten with class vx68k::human::dos.

	* vx68k/Makefile.am (libvx68k_a_SOURCES): Add dos.cc.
	* vx68k/dos.cc: New file.

	* include/vm68k/cpu.h (VM68K_CPU_H): Fix typo.

	* include/vx68k/Makefile.am (noinst_HEADERS): Add human.h.
	* include/vx68k/human.h (human): New file.

	* vm68k/cpu.cc (illegal_insn): Output message.

	* vx68k/memory.cc (main_memory_page): Allocate array.
	(~main_memory_page): Deallocate array.
	(getw): Return value.

	* include/vx68k/memory.h (memory_page): Add members: end and
	array.

	* include/vx68k/memory.h (class address_space): Renamed from
	memory.  All references changed.
	* include/vm68k/memory.h (class address_space): Likewise.

	* vm68k/memory.cc (set_memory_pages): Defined.

	* vx68k/Makefile.am (libvx68k_a_SOURCES): Add memory.cc.
	* vx68k/memory.cc: New file.

	* include/vm68k/types.h (namespace types): New namespace
	containing intX and uintX typedefs.

	* vx68k/main.cc (main): Add constructor argument for mem.
	* include/vx68k/memory.h (memory): Add member main_memory.
	(class main_memory_page): New class.

	* vx68k/main.cc (main): Set PC.

	* include/vm68k/cpu.h (struct user_cpu_regs): Rename member r to
	gr.

	* vx68k/Makefile.am (libvx68k_a_SOURCES): Add loader.cc.
	* vx68k/loader.cc: New file.

	* Version 0.25.

	* vm68k/cpu.cc (run): Modify display format for bus error.

	* vm68k/memory.cc (READ): New const.
	(WRITE): New const.
	(read): Add READ to fc.
	(getb): Likewise.
	(getw): Likewise.
	(write): Add WRITE to fc.
	(putb): Likewise.
	(putw): Likewise.

	* vx68k/main.cc (main): Update use of cpu.

	* vm68k/cpu.cc (cpu): Remove argument.
	(run): Add argument ec.
	(set_pc): #if'd out code.
	(set_exception_listener): Likewise.

	* include/vm68k/cpu.h (class cpu): Remove member context.

	* include/vm68k/memory.h (struct bus_error): Add base class
	exception.
	* include/vm68k/types.h (struct exception): New class.
	(VM68K_TYPES_H): Fix typo.
	Test UINT_MAX instead of INT_MAX.

	* vm68k/cpu.cc (run): Display fc and address of bus error.

	* vm68k/memory.cc (bus_error): New constructor.  Update all
	construction.

	* include/vm68k/memory.h (struct bus_error): Add members.

	* vx68k/main.cc (main): Remove abort.

	* vm68k/cpu.cc (run): Catch bus_error.

	* vm68k/memory.cc: Add using namespace std.
	(getl): Added.
	(putl): Added.
	(read): New method.
	(write): New method.
	(getb): New method.
	(getw): [class bus_error_page] New method.
	(putb): New method.
	(putw): New method.
	(getw): [class memory] Use page_table.
	(memory): Fill page_table with &default_page.

	* include/vm68k/memory.h (PAGE_SHIFT): Renamed from
	PAGE_SIZE_SHIFT.
	(PAGE_SIZE): Bug fix.
	(MEMORY_SHIFT): New const.
	(NPAGES): New const.
	(struct memory_page): Rename methods read8 to getb, etc.
	(class memory): Likewise.
	(class bus_error_page): New class.
	(class memory): Put iterator in #if 0/#endif.
	(class memory): Add member: default_page.  Rename member page to
	page_table.

1998-11-18  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Update.

1998-11-17  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* README: New file.

	* include/vm68k/cpu.h (class cpu): Add description.

	* TODO: New file.

1998-11-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.24.

	* vx68k/main.cc: Use namespaces.

	* include/vx68k/memory.h: Make namespace vx68k.
	(class memory): Renamed from x68k_memory.

	* include/vm68k/cpu.h: Make namespace vm68k.
	* include/vm68k/memory.h: Likewise.
	* include/vm68k/types.h: Likewise.
	* vm68k/cpu.cc: Likewise.
	* vm68k/memory.cc: Likewise.

	* NEWS: New file.
	* configure.in: Change version numbering.

1998-10-08  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* configure.in (AC_TYPE_SIZE_T): Added.

	* vx68k/main.cc: Undef const and inline.

	* COPYING: New file.
	* INSTALL: New file.

	* Add copyright info to the source files.

	* vm68k/cpu.cc: All refs to substituted members of class cpu
	changed.
	(execution_context): New function.
	(SUPER_PROGRAM): Removed.
	(run): Add some code for function code.
	(run): Change instruction handler call.
	(set_handlers): Fill table using a mask pattern.
	(illegal_insn): Renamed from undefined_insn.  All refs changed.
	(cpu): Change initializers.

	* include/vm68k/cpu.h (struct exception_listener): Renamed from
	interrupt_listener.  All refs changed.
	(struct exception_listener): Add illegal.
	(struct execution_context): New struct.
	(class cpu): Put explicit keyword to the constructor.
	(class cpu): Use execution_context for insn_handler arg.
	(class cpu): Rename undefined_insn to illegal_insn.
	(class cpu): Substitute members with execution_context.

1998-10-07  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* vx68k/main.cc (main): Use x68k_memory and cpu.

	* vm68k/memory.cc (read16): New function.

	* include/vm68k/memory.h (VM68K_MEMORY_H): Fix typo.
	(function_code): New enum.

	* include/vm68k/Makefile.am (noinst_HEADERS): Add types.h and
	memory.h.

	* include/Makefile.am (SUBDIRS): Add vx68k.

	* configure.in (AC_OUTPUT): Add include/vx68k/Makefile.

	* include/vx68k/Makefile.am: New file.
	* include/vx68k/memory.h: New file.

	* ChangeLog: New file.

