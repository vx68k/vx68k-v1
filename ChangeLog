1998-11-20  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* include/vx68k/memory.h (class address_space): Renamed from
	memory.  All references changed.

	* vm68k/memory.cc (set_memory_pages): Defined.

	* vx68k/Makefile.am (libvx68k_a_SOURCES): Add memory.cc.
	* vx68k/memory.cc: New file.

	* include/vm68k/types.h (namespace types): New namespace
	containing intX and uintX typedefs.

	* vx68k/main.cc (main): Add constructor argument for mem.
	* include/vx68k/memory.h (memory): Add member main_memory.
	(class main_memory_page): New class.

	* vx68k/main.cc (main): Set PC.

	* include/vm68k/cpu.h (struct user_cpu_regs): Rename member r to
	gr.

	* vx68k/Makefile.am (libvx68k_a_SOURCES): Add loader.cc.
	* vx68k/loader.cc: New file.

	* Version 0.25.

	* vm68k/cpu.cc (run): Modify display format for bus error.

	* vm68k/memory.cc (READ): New const.
	(WRITE): New const.
	(read): Add READ to fc.
	(getb): Likewise.
	(getw): Likewise.
	(write): Add WRITE to fc.
	(putb): Likewise.
	(putw): Likewise.

	* vx68k/main.cc (main): Update use of cpu.

	* vm68k/cpu.cc (cpu): Remove argument.
	(run): Add argument ec.
	(set_pc): #if'd out code.
	(set_exception_listener): Likewise.

	* include/vm68k/cpu.h (class cpu): Remove member context.

	* include/vm68k/memory.h (struct bus_error): Add base class
	exception.
	* include/vm68k/types.h (struct exception): New class.
	(VM68K_TYPES_H): Fix typo.
	Test UINT_MAX instead of INT_MAX.

	* vm68k/cpu.cc (run): Display fc and address of bus error.

	* vm68k/memory.cc (bus_error): New constructor.  Update all
	construction.

	* include/vm68k/memory.h (struct bus_error): Add members.

	* vx68k/main.cc (main): Remove abort.

	* vm68k/cpu.cc (run): Catch bus_error.

	* vm68k/memory.cc: Add using namespace std.
	(getl): Added.
	(putl): Added.
	(read): New method.
	(write): New method.
	(getb): New method.
	(getw): [class bus_error_page] New method.
	(putb): New method.
	(putw): New method.
	(getw): [class memory] Use page_table.
	(memory): Fill page_table with &default_page.

	* include/vm68k/memory.h (PAGE_SHIFT): Renamed from
	PAGE_SIZE_SHIFT.
	(PAGE_SIZE): Bug fix.
	(MEMORY_SHIFT): New const.
	(NPAGES): New const.
	(struct memory_page): Rename methods read8 to getb, etc.
	(class memory): Likewise.
	(class bus_error_page): New class.
	(class memory): Put iterator in #if 0/#endif.
	(class memory): Add member: default_page.  Rename member page to
	page_table.

1998-11-18  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Update.

1998-11-17  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* README: New file.

	* include/vm68k/cpu.h (class cpu): Add description.

	* TODO: New file.

1998-11-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.24.

	* vx68k/main.cc: Use namespaces.

	* include/vx68k/memory.h: Make namespace vx68k.
	(class memory): Renamed from x68k_memory.

	* include/vm68k/cpu.h: Make namespace vm68k.
	* include/vm68k/memory.h: Likewise.
	* include/vm68k/types.h: Likewise.
	* vm68k/cpu.cc: Likewise.
	* vm68k/memory.cc: Likewise.

	* NEWS: New file.
	* configure.in: Change version numbering.

1998-10-08  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* configure.in (AC_TYPE_SIZE_T): Added.

	* vx68k/main.cc: Undef const and inline.

	* COPYING: New file.
	* INSTALL: New file.

	* Add copyright info to the source files.

	* vm68k/cpu.cc: All refs to substituted members of class cpu
	changed.
	(execution_context): New function.
	(SUPER_PROGRAM): Removed.
	(run): Add some code for function code.
	(run): Change instruction handler call.
	(set_handlers): Fill table using a mask pattern.
	(illegal_insn): Renamed from undefined_insn.  All refs changed.
	(cpu): Change initializers.

	* include/vm68k/cpu.h (struct exception_listener): Renamed from
	interrupt_listener.  All refs changed.
	(struct exception_listener): Add illegal.
	(struct execution_context): New struct.
	(class cpu): Put explicit keyword to the constructor.
	(class cpu): Use execution_context for insn_handler arg.
	(class cpu): Rename undefined_insn to illegal_insn.
	(class cpu): Substitute members with execution_context.

1998-10-07  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* vx68k/main.cc (main): Use x68k_memory and cpu.

	* vm68k/memory.cc (read16): New function.

	* include/vm68k/memory.h (VM68K_MEMORY_H): Fix typo.
	(function_code): New enum.

	* include/vm68k/Makefile.am (noinst_HEADERS): Add types.h and
	memory.h.

	* include/Makefile.am (SUBDIRS): Add vx68k.

	* configure.in (AC_OUTPUT): Add include/vx68k/Makefile.

	* include/vx68k/Makefile.am: New file.
	* include/vx68k/memory.h: New file.

	* ChangeLog: New file.

